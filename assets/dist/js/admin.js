!function(t){function e(i){if(r[i])return r[i].exports;var n=r[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var r={};e.m=t,e.c=r,e.d=function(t,r,i){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,r){r(1),t.exports=r(2)},function(t,e){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}();!function(t,e,n,a){"use strict";var o=void 0,s=function(){function t(e){r(this,t),this.taxonomy=e}return i(t,[{key:"init",value:function(){this.buildCache(),this.render(),this.bindEvents()}},{key:"buildCache",value:function(){this.taxonomyMetaBox=e.getElementById("taxonomy-"+this.taxonomy.name),this.$checkList=n(e.getElementById(this.taxonomy.name+"checklist")),this.termListItems=this.taxonomyMetaBox.querySelectorAll("."+this.taxonomy.name+"checklist li"),this.primaryInputUITemplate=wp.template("wpt-primary-"+this.taxonomy.name+"-input"),this.setPrimaryButtonUI=o({isPrimary:!1}),this.unSetPrimaryButtonUI=o({isPrimary:!0})}},{key:"render",value:function(){this.taxonomyMetaBox.insertAdjacentHTML("beforeend",this.primaryInputUITemplate(this.taxonomy)),this.primaryInput=e.getElementById("_wp_primary_"+this.taxonomy.name),this.buildPrimaryTermsUI()}},{key:"bindEvents",value:function(){this.clickHandler=this.clickHandler.bind(this),this.taxonomyMetaBox.addEventListener("click",this.clickHandler),this.$checkList.on("wpListAddEnd",this.handleNewTermAdded.bind(this))}},{key:"buildPrimaryTermsUI",value:function(){var t=this.getPrimaryTerm(),e=!0,r=!1,i=void 0;try{for(var n,a=this.termListItems[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){var o=n.value;o.querySelector("input[type=checkbox]").value===t?(o.classList.add("primary-term"),o.firstElementChild.insertAdjacentHTML("afterend",this.unSetPrimaryButtonUI)):o.firstElementChild.insertAdjacentHTML("afterend",this.setPrimaryButtonUI)}}catch(t){r=!0,i=t}finally{try{!e&&a.return&&a.return()}finally{if(r)throw i}}}},{key:"clickHandler",value:function(t){t.target&&(t.target.matches("input[type=checkbox]")?this.termCheckHandler(t):t.target.matches("a.toggle-primary-term")&&(t.preventDefault(),this.togglePrimaryTermHandler(t)))}},{key:"handleNewTermAdded",value:function(t){t.target.firstElementChild.firstElementChild.insertAdjacentHTML("afterend",this.setPrimaryButtonUI)}},{key:"termCheckHandler",value:function(t){t.target.parentNode.parentNode.classList.contains("primary-term")&&(this.resetPrimaryTermListItems(),this.setPrimaryTerm())}},{key:"togglePrimaryTermHandler",value:function(t){var e=t.target.closest("li").id.match(/-(\d+)$/)[1],r=this.taxonomyMetaBox.querySelectorAll("#popular-"+this.taxonomy.name+"-"+e+", #"+this.taxonomy.name+"-"+e);r[0].classList.contains("primary-term")?(this.resetPrimaryTermListItems(),this.setPrimaryTerm()):(this.setPrimaryTermListItems(r),this.setPrimaryTerm(e))}},{key:"setPrimaryTermListItems",value:function(t){this.resetPrimaryTermListItems();var e=!0,r=!1,i=void 0;try{for(var n,a=t[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){var o=n.value,s=o.querySelector("span.primary-term-button");o.removeChild(s),o.firstElementChild.insertAdjacentHTML("afterend",this.unSetPrimaryButtonUI),o.classList.add("primary-term")}}catch(t){r=!0,i=t}finally{try{!e&&a.return&&a.return()}finally{if(r)throw i}}}},{key:"resetPrimaryTermListItems",value:function(){var t=this.taxonomyMetaBox.querySelectorAll("li.primary-term"),e=!0,r=!1,i=void 0;try{for(var n,a=t[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){var o=n.value,s=o.querySelector("span.primary-term-button");o.classList.remove("primary-term"),o.removeChild(s),o.firstElementChild.insertAdjacentHTML("afterend",this.setPrimaryButtonUI)}}catch(t){r=!0,i=t}finally{try{!e&&a.return&&a.return()}finally{if(r)throw i}}}},{key:"getPrimaryTerm",value:function(){return this.primaryInput.value}},{key:"setPrimaryTerm",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.primaryInput.value=t,0<t&&(e.getElementById("in-"+this.taxonomy.name+"-"+t).checked=!0)}}]),t}();t.onload=function(){o=wp.template("wpt-primary-term-button"),wp_primary_terms_vars.map(function(t){return new s(t).init()})}}(window,document,jQuery)},function(t,e){}]);
//# sourceMappingURL=admin.js.map