!function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,r){r(1),t.exports=r(2)},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();!function(t,e,r,a){var o=void 0,s=void 0,m=function(){function t(e){n(this,t),this.taxonomy=e}return i(t,[{key:"init",value:function(){this.isTaxonomyMetaBoxExists()&&(this.buildCache(),this.render(),this.bindEvents())}},{key:"buildCache",value:function(){return this.taxonomyMetaBox=e.getElementById("taxonomy-"+this.taxonomy.name),!!this.taxonomyMetaBox&&(this.$checkList=r(e.getElementById(this.taxonomy.name+"checklist")),this.termListItems=this.taxonomyMetaBox.querySelectorAll(".categorychecklist li"),this.primaryInputUITemplate=wp.template("wp-primary-"+this.taxonomy.name+"-input"),!0)}},{key:"render",value:function(){this.taxonomyMetaBox.insertAdjacentHTML("beforeend",this.primaryInputUITemplate(this.taxonomy)),this.primaryInput=e.getElementById("_wp_primary_"+this.taxonomy.name),this.buildPrimaryTermsUI()}},{key:"bindEvents",value:function(){this.clickHandler=this.clickHandler.bind(this),this.taxonomyMetaBox.addEventListener("click",this.clickHandler),this.$checkList.on("wpListAddEnd",this.handleNewTermAdded.bind(this))}},{key:"buildPrimaryTermsUI",value:function(){var t=this.getPrimaryTerm(),e=!0,r=!1,n=void 0;try{for(var i,a=this.termListItems[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var m=i.value;m.querySelector("input[type=checkbox]").value===t?(m.classList.add("primary-term"),m.firstElementChild.insertAdjacentHTML("afterend",s)):m.firstElementChild.insertAdjacentHTML("afterend",o)}}catch(t){r=!0,n=t}finally{try{!e&&a.return&&a.return()}finally{if(r)throw n}}}},{key:"clickHandler",value:function(t){t.target&&(t.target.matches("input[type=checkbox]")?this.termCheckHandler(t):t.target.matches("a.toggle-primary-term")&&(t.preventDefault(),this.togglePrimaryTermHandler(t)))}},{key:"handleNewTermAdded",value:function(t){t.target.firstElementChild.firstElementChild.insertAdjacentHTML("afterend",o)}},{key:"termCheckHandler",value:function(t){t.target.parentNode.parentNode.classList.contains("primary-term")&&(this.resetPrimaryTermListItems(),this.setPrimaryTerm())}},{key:"togglePrimaryTermHandler",value:function(t){var e=t.target.closest("li").id.match(/-(\d+)$/)[1],r=this.taxonomyMetaBox.querySelectorAll("#popular-"+this.taxonomy.name+"-"+e+", #"+this.taxonomy.name+"-"+e);r[0].classList.contains("primary-term")?(this.resetPrimaryTermListItems(),this.setPrimaryTerm()):(this.setPrimaryTermListItems(r),this.setPrimaryTerm(e))}},{key:"setPrimaryTermListItems",value:function(t){this.resetPrimaryTermListItems();var e=!0,r=!1,n=void 0;try{for(var i,a=t[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var o=i.value,m=o.querySelector("span.primary-term-button");o.removeChild(m),o.firstElementChild.insertAdjacentHTML("afterend",s),o.classList.add("primary-term")}}catch(t){r=!0,n=t}finally{try{!e&&a.return&&a.return()}finally{if(r)throw n}}}},{key:"resetPrimaryTermListItems",value:function(){var t=this.taxonomyMetaBox.querySelectorAll("li.primary-term"),e=!0,r=!1,n=void 0;try{for(var i,a=t[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var s=i.value,m=s.querySelector("span.primary-term-button");s.classList.remove("primary-term"),s.removeChild(m),s.firstElementChild.insertAdjacentHTML("afterend",o)}}catch(t){r=!0,n=t}finally{try{!e&&a.return&&a.return()}finally{if(r)throw n}}}},{key:"getPrimaryTerm",value:function(){return this.primaryInput.value}},{key:"setPrimaryTerm",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.primaryInput.value=t,t>0){e.getElementById("in-"+this.taxonomy.name+"-"+t).checked=!0;var r=e.getElementById("in-popular-"+this.taxonomy.name+"-"+t);r&&(r.checked=!0)}}},{key:"isTaxonomyMetaBoxExists",value:function(){return this.taxonomyMetaBox=e.getElementById("taxonomy-"+this.taxonomy.name),!!this.taxonomyMetaBox}}]),t}();t.onload=function(){if(void 0!==wpPrimaryTermsVars&&wpPrimaryTermsVars.length>0){var t=wp.template("wp-primary-term-button");o=t({isPrimary:!1}),s=t({isPrimary:!0}),wpPrimaryTermsVars.map(function(t){return new m(t).init()})}}}(window,document,jQuery)},function(t,e){}]);
//# sourceMappingURL=admin.min.js.map